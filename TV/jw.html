<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="favicon.png"/>
  <title>KaSin TV Player</title>
  <link href="https://cdn.plyr.io/3.6.2/plyr.css" rel="stylesheet"/>
  <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://cdn.plyr.io/3.6.2/plyr.polyfilled.js"></script>
</head>
<body bgcolor='black' style='margin:0'>
  <video id="player" class="plyr__video-embed" playsinline controls></video>

  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
      console.log("Document is ready");

      // Mendapatkan nilai parameter search dari URL
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get('id');

      // Data JSON untuk channel
      const channelData = {
        "PTV": {
          "url": "https://tv5.hoichoi24.com/1000/video.m3u8"
        },
        "Star_Sport2": {
          "url": "https://tv5.hoichoi24.com/1007/video.m3u8"
        },
        "PTV2": {
          "url": "http://175.107.244.52:4457/play/a08g/index.m3u8"
        },
        "TLTTV": {
          "url": "http://cdn.live247stream.com/thelight/tv/playlist.m3u8"
        },
        "BANGLATVEUROPE": {
          "url": "https://byphdgllyk.gpcdn.net/hls/banglatveurope/index.m3u8"
        },
        "Star1hin": {
          "url": "http://vo01.mohdtv.com:8880//live/hdtv0405dda140a6/15954034/55273.m3u8"
        },
        "Star1eng": {
          "url": "https://ptvsports2.com/master.m3u8/?key=WASITV&c="
        },
        "Willow": {
          "url": "https://ptvsports2.com/master.m3u8/?key=WASITV&c=vvwillow"
        },
        "Willowxtrta": {
          "url": "https://beecdn.wadim77289.workers.dev/Willow_Extra_Live_TV/tracks-v1a1/mono.m3u8"
        },
        "SkyCric": {
          "url": "https://ptvsports2.com/master.m3u8/?key=WASITV&c=supercricket"
        },
        "SuperCric": {
          "url": "https://beecdn.wadim77289.workers.dev/SuperSport_Cricket_Live_TV/tracks-v1a1/mono.m3u8"
        },
        "Tensport": {
          "url": "http://176.119.29.52/live/00:1A:79:00:02:27/SN_1697176356/301.m3u8"
        },
        "NagorikTV": {
          "url": "https://tv5.hoichoi24.com/1102/index.m3u8"
        },
        "Skymain": {
          "url": "https://live.notebulk.xyz/7okqOybgpW8rCIak8rlISA/1718612018/uk_ssmain/tracks-v1a1/mono.m3u8"
        },
        "T-Sport": {
          "url": "http://95.216.247.104/live/2575376/47426736/167590.m3u8?token=GhMNBEZcR1gRBwUBAl9QBVdSAAQEVVkBWl4EBlUADgdQBAQAVwxVAQZEGBoXEhZRBVtrXgVGAgFUUQINAxQUFhJUFzpcUEdYEV4FDVJTVRZIFEBeDAEaClJKFURaXBRZQwJUVgENR04RA0xMARQKVQhpUFIXDVtVQFxZQV9UGkEOXzoBUFkEDFdEDhpVREgWDUVEFVsKTVwOShVWWkxEAhVUR18XBVVTC0QYGgcJEVoQRE0VW0Z2YEBKFVFLTFMNElgKCxcORw8AEwwaSEQNRztEUUQVFl1RDwNFFgkaBkFNEwgETWsGDV0IUVsQDwtaFxQOFVBGFBIPCVldR1dEPBFYAUcPFlZTAFUHGhk="
        }
      };
          
      // Memastikan id ada dalam data JSON dan Setup Plyr player
      if (id && channelData[id]) {
        const videoSrc = channelData[id].url;
        const video = document.querySelector('#player');

        if (Hls.isSupported() && videoSrc.includes('.m3u8')) {
          const hls = new Hls();
          hls.loadSource(videoSrc);
          hls.attachMedia(video);
          hls.on(Hls.Events.MANIFEST_PARSED, function () {
            video.play();
          });
        } else if (videoSrc.includes('.mpd')) {
          const dash = dashjs.MediaPlayer().create();
          dash.initialize(video, videoSrc, true);
        } else {
          video.src = videoSrc;
          video.play();
        }

        const player = new Plyr(video, {
          captions: { active: true, update: true, language: 'en' },
        });

      } else {
        console.error('Channel not found or URL is empty!');
        const video = document.querySelector('#player');
        // Example fallback URL for testing
        video.src = "https://cdn.jwplayer.com/manifests/yp34SRmf.m3u8";
        video.play();
        const player = new Plyr(video, {
          captions: { active: true, update: true, language: 'en' },
        });
      }
    });
  </script>
</body>
</html>
